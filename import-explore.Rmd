---
title: "UK road surface area: Part 1"
author: "Mark Ruddy"
date: "2017-02-27"
output: html_notebook
bibliography: /Users/markruddy/Documents/Research/Data/Bibliography/bibliodb.bib
---

## Roads and the places we live

One of the things that interests me is the urban environment and how we travel around it. I use whatever type of transport seems best - car, bus, train, hovercraft (actually not hovercraft) - depending on what I have to do and how far I have to go. But I ride a bike and walk most places because they tend to be the most convenient and attractive modes.

Walk or cycle around anywhere in the UK and it's not hard to see how much motor vehicles have shaped our world. Building roads is central to how our world has developed [^1]. The benefits to economies and quality of life this brings are set against an escalating series of problems: local air pollution, CO2 emissions, sedentary lifestyle issues, and road traffic mortality. There's a need for an urgent, fundamental shift away from decades of road-centred policy choices that have shaped the places we live in. Unfortunatley, legacy issues of [car dependency](https://en.wikipedia.org/wiki/Automobile_dependency) are hard to overcome and there is generally strong [local opposition](http://www.cs11.london/) to all but the weakest attempts to take road space from motor vehicles and give it to pedestrians and bicycle users.

One aspect of how road design impacts people is the amount of space given over to motor vehicles, especially in places where people live. The design of our public space influences so much about society - culture, economy, well-being - and road infrastructure is the portion of public space that [frames everything else](https://www.theguardian.com/books/2011/oct/14/jane-jacobs-death-and-life-rereading) [@jacobs:1961aa]. In fact, increasing numbers of cars mean that not only road space but duplicated [parking space](https://aseasyasridingabike.wordpress.com/2012/09/04/the-effect-of-private-car-dependence-on-land-use/) is also needed, seizing even more land.

With attempts to push electric vehicles as the solution to pollution and transport sector CO2 emissions, the other [externalities](https://en.wikipedia.org/wiki/Externalities_of_automobiles) associated with motorised transport of any sort mustn't be forgotten. Electric cars are just as capable of killing and seriously injuring people or dividing neighbourhoods - see this lovely graphic in Figure 1 by @appleyard:1981aa - as petrol-powered ones.

<figure class="align-centre">
  <a href="xresources/assets/images/geo-science/ois-plot.png"><img src="xresources/assets/images/general/appleyard-1981-fig3.png" alt="@appleyard:1981aa. Intra-street social connections with differing traffic volumes."></a>
  <figcaption>Figure 1. @appleyard:1981aa. Intra-street social connections with differing traffic volumes.</figcaption>
</figure>


## What is the length of the UK road network?

It was a conversation with my 6 year-old daughter that got me to thinking exactly how much of the surface area of the places we live in is occupied by roads. I have little time on my hands at the moment so decided to try and work it out. 

There are two ways to go about this:

1. Use actual width and length data of the UK road network to produce a figure.
  * This is held by the [Ordnance Survey](https://www.ordnancesurvey.co.uk/). BUT it's £££s to obtain.
  * [OpenStreetMap](https://www.openstreetmap.org) has built a highly detailed geographic dataset that contains a road width attribute. Whilst the mapping coverage of the road network as line data is very good, the presence of a width attribute is not 
2. Use road length data with estimates of road width for different types of roads.





1. How much surface area is taken up by the UK road network?
2. How can this be broken down into urban/rural areas?

## Approaches

1. Use road length information and assumptions of road width to estimate area.
2. Measure from OS or OSM.

Advantage of 2 is that area can be broken down into smaller geographical areas. 



## Available data


Data on road lengths in Great Britain can be found from the [Office for National Statistics (ONS)](https://www.gov.uk/government/statistical-data-sets/rdl02-road-lengths-kms). This is provided for all road types by Local Authority from 2005 to 2015. A supplement also lists road lengths, with various data gaps, dating back to 1914.

The Ordnance Survey also holds information on road length in their [OS Open Roads](https://www.ordnancesurvey.co.uk/business-and-government/products/os-open-roads.html) product - available under the Open Government Licence ([OGL](http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/)). This could potentially allow any analysis to be broken down into smaller geographic areas than that achievable from the ONS data. But OS Open Roads only incldues Motorways, A-roads, and B-roads.

Both datasets require assumptions on the widths of different road types. The ONS estimate includes OS data and additionally draws on information from Local Authorities, the Scottish and Welsh governments, and the Highways Agency. With the additional information present in the ONS data I decided to go with that as a basis for estimating road area.

## ONS road length

[Office for National Statistics (ONS)](https://www.gov.uk/government/statistical-data-sets/rdl02-road-lengths-kms) are downloadable as .ods files. 

Focussing on the Local Authority dataset:

```{r load-packages, include=FALSE}
library(tidyverse)
library(readODS)
library(httr)
```

I'm interested in looking at road lengths across all years (2005-2015) and 

## The ONS dataset

```{r read-data}

url <- "https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/523715/rdl0202.ods"

GET(url, write_disk("../data/ONS-GB-roads.ods", overwrite = T))

ons.roads <- read_ods("../data/ONS-GB-roads.ods", sheet = 1, skip = 6)
```

Inspecting ONS-GB-roads.ods in OpenOffice shows that:

* There are 6 lines to skip before the dataset begins.
* Sheets contain different types of road length information. Those sheets with names prefixed "RDL0202a"" contain Motorway, 'A' road, and Minor road data broken down by Local authority. These eleven sheets (years) are the data we're interested in.
* The cell range of the dataset (including column names) is:
  * A7:Z211 for 2005 to 2008; 
  * A7:Z213 from 2009 to 2012 
    - Rural 'C' and 'U', and Urban 'C' and 'U' are separate up to 2013.
    - Cheshire UA is split into Cheshire East UA, and Cheshire West and Chester UA from 2009.
    - Bedfordshire is split into Bedford UA and Central Bedfordshire UA from 2009.
  * and A7:X213 from 2013 to 2015 - Rural 'C' and 'U', and Urban 'C' and 'U' are combined from 2013.
* There is a variety of lines of meta-data below cells containing the dataset.



```{r read-r}
path <- "../data/ONS-GB-roads.ods"

## Sheets we're interested in
sheets <- c(seq(1,19,2),20)

ons.call <- function(sheet, range) {
  read_ods(path, sheet = sheet, col_names = F, skip = 6) #skip =6, range = "A7:Z213"
} 

rdl.list <- lapply(sheets, ons.call)
```

Having read data on road length from the .ods sheets we need to clean it up. A number of differences in the dimensions of the dataset were highlighted above. We need to harmonise each list element (sheet) in order to combine them all together and make them 'tidy' for analysis.

I could do all this manipulation in the spreadsheet but the time spent manually tinkering to give the format needed is not time well spent. Some of the operations are repetative and getting them down in R enables them to be applied across all eleven years. Also, it's a good R learning experience.

## Bringing the whole road length dataset together

What are the steps that need to be taken to combine all the road length data together into a single dataset?

1. Add a year column to each list element.
2. Remove NULL, NA or "" columns.
3. Remove non-data space below dataset.
4. Harmonise rows post-2009: 
  - Cheshire UA is split into Cheshire East UA, and Cheshire West and Chester UA from 2009.
  - Bedfordshire is split into Bedford UA and Central Bedfordshire UA from 2009. 
5. Harmonise columns:
  - From 2013 to 2015 - Rural 'C' and 'U', and Urban 'C' and 'U' are combined from 2013.

```{r tidy}
head(rdl.list[[1]])

lapply()


# rdl = do.call("rbind.data.frame", rdl.list) ## combine dfs from list
```





## References





[^1]: [Although they were originally built for bicycles](http://www.roadswerenotbuiltforcars.com/)


